# ‚úÖ YooKassa —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30 –æ–∫—Ç—è–±—Ä—è 2025

---

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

### ‚úÖ 1. –£–¥–∞–ª–µ–Ω—ã —Ñ–∞–π–ª—ã YooKassa (7 —Ñ–∞–π–ª–æ–≤)
- `src/app/api/wallet/create-payment/route.ts`
- `src/app/api/wallet/check-payment/route.ts`
- `src/app/api/wallet/yookassa-webhook/route.ts`
- `src/lib/yookassa.ts`
- `src/components/DepositBalanceModal.tsx`
- `src/app/wallet/payment-result/page.tsx`
- –ö–Ω–æ–ø–∫–∞ "üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ÆKassa" –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã (5 —Ñ–∞–π–ª–æ–≤)
–ó–∞–º–µ–Ω–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è YooKassa –Ω–∞ "–ø–ª–∞—Ç—ë–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π":
- `src/app/register/page.tsx`
- `src/app/terms/page.tsx`
- `src/app/about/page.tsx`
- `src/app/privacy/page.tsx`
- `src/app/offer/page.tsx`

### ‚úÖ 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏
- –°–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –≠—Å–∫—Ä–æ—É (–∑–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤) —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –ö–æ–º–∏—Å—Å–∏—è 20% —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è ‚úÖ
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ‚úÖ

---

## üéØ –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ú–æ–¥–µ–ª–∏ –ë–î:
```typescript
User.balance         // –û—Å–Ω–æ–≤–Ω–æ–π –±–∞–ª–∞–Ω—Å
User.frozenBalance   // –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
Transaction          // –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
Task.escrowAmount    // –°—É–º–º–∞ –≤ —ç—Å–∫—Ä–æ—É –ø–æ –∑–∞–¥–∞—á–µ
```

### API Endpoints (–≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é):
```
‚úÖ GET  /api/wallet/balance       - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
‚úÖ GET  /api/wallet/transactions  - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚úÖ POST /api/wallet/deposit       - –ü–æ–ø–æ–ª–Ω–∏—Ç—å (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π)
‚úÖ POST /api/wallet/withdraw      - –í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞
‚úÖ POST /api/tasks/[id]/assign    - –ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤
‚úÖ PATCH /api/tasks/[id]/complete - –í—ã–ø–ª–∞—Ç–∞ —Å –∫–æ–º–∏—Å—Å–∏–µ–π 20%
‚úÖ POST /api/tasks/[id]/cancel    - –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
```

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- ‚úÖ –ü—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è ‚Üí —Å—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ ‚Üí –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 80%, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ 20%
- ‚úÖ –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ ‚Üí —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∑–∞–∫–∞–∑—á–∏–∫—É
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **YOOKASSA_–£–î–ê–õ–ï–ù–û.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ —É–¥–∞–ª–µ–Ω–æ –∏ —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å
2. **–ü–õ–ê–¢–ï–ñ–ù–´–ï_–°–ò–°–¢–ï–ú–´_–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–´.md** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ (CloudPayments, –†–æ–±–æ–∫–∞—Å—Å–∞, –¢-–ë–∞–Ω–∫ –∏ –¥—Ä.)
3. **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø_–¢–ë–ê–ù–ö.md** - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¢-–ë–∞–Ω–∫–∞
4. **–ö–†–ê–¢–ö–ê–Ø_–°–í–û–î–ö–ê.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¢-–ë–∞–Ω–∫–∞:

### –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π `deposit` endpoint
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –≠—Å–∫—Ä–æ—É –º–µ—Ö–∞–Ω–∏–∑–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–∏
- ‚úÖ –ü—Ä–∞–≤–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (2-4 —á–∞—Å–∞ —Ä–∞–±–æ—Ç—ã):
1. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `src/lib/tbank.ts`
2. –†–æ—É—Ç—ã `/api/wallet/tbank/create-payment` –∏ `/api/wallet/tbank/webhook`
3. UI –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
4. –°—Ç—Ä–∞–Ω–∏—Ü—ã success/failed
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. `–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø_–¢–ë–ê–ù–ö.md`

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

1. **–ù–∏–∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏ –Ω–µ —Å–ª–æ–º–∞–Ω–æ** - –≤—Å—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–µ–Ω—å–≥–∞–º–∏ –æ—Å—Ç–∞–ª–∞—Å—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–π
2. **–ë–î –Ω–µ –∏–∑–º–µ–Ω—è–ª–∞—Å—å** - –≤—Å–µ –º–æ–¥–µ–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ –º–µ—Å—Ç–µ
3. **–≠—Å–∫—Ä–æ—É —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∑–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ —Å—Ä–µ–¥—Å—Ç–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
4. **Deposit —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω** - –ø–æ–¥–æ–π–¥—ë—Ç –¥–ª—è –ª—é–±–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –î–æ–∂–¥–∞—Ç—å—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ—Ç –¢-–ë–∞–Ω–∫–∞
2. ‚è≥ –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ (TerminalKey, Password)
3. ‚è≥ –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ `–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø_–¢–ë–ê–ù–ö.md`
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
5. ‚è≥ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- **–§–∞–π–ª–æ–≤ —É–¥–∞–ª–µ–Ω–æ:** 7
- **–§–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:** 5
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ —É–¥–∞–ª–µ–Ω–æ:** ~500
- **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** 1 —á–∞—Å
- **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚úÖ –°—Ç–∞–±–∏–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç YooKassa –∏ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ª—é–±–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã!**

–í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–∞–Ω—Å–∞–º–∏, —ç—Å–∫—Ä–æ—É –∏ –∫–æ–º–∏—Å—Å–∏—è–º–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.

---

**–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¢-–ë–∞–Ω–∫–∞: https://www.tbank.ru/kassa/dev/
- Telegram: @tbusiness_bot

**–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¢-–ë–∞–Ω–∫–∞:** 2-4 —á–∞—Å–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–≤ ‚ö°

