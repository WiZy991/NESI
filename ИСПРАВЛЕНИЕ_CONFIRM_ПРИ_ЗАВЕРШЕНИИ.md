# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ Confirm –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –Ω–æ **–ù–ï –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–ª–∏—Å—å –≤ –¢-–ë–∞–Ω–∫–µ**. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ `mapi.sp.wrong.payout.amount` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞.

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ó–∞–∫–∞–∑—á–∏–∫ –ø–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å –Ω–∞ 100‚ÇΩ ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–ª–∞—Ç–µ–∂ –≤ –¢-–ë–∞–Ω–∫–µ (Init) ‚Üí —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ **AUTHORIZED** (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã)
2. –ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É ‚Üí —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ë–î –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã ‚Üí **Confirm –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**
3. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–≤–µ—Å—Ç–∏ 80‚ÇΩ ‚Üí –æ—à–∏–±–∫–∞: "—Å—É–º–º–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å–¥–µ–ª–∫–∏"

### –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:
–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¢-–ë–∞–Ω–∫–∞ (`multisplit.md` —Ä–∞–∑–¥–µ–ª 4.1, –ø—É–Ω–∫—Ç 461-465):
- –í—ã–ø–ª–∞—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏ (–ø–ª–∞—Ç–µ–∂–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ **CONFIRMED**)
- –ü–ª–∞—Ç–µ–∂–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ **AUTHORIZED** (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã) –ù–ï –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç
- –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–ª–∞—Ç–µ–∂–∞ –∏–∑ **AUTHORIZED** –≤ **CONFIRMED** –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ `/v2/Confirm`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `Confirm` –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –≤ —Ñ–∞–π–ª–µ `src/app/api/tasks/[id]/complete/route.ts`.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–µ–ø–µ—Ä—å:

1. **–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏:**
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è PaymentId –∑–∞–∫–∞–∑—á–∏–∫–∞ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `/v2/Confirm` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –≤ –¢-–ë–∞–Ω–∫–µ
   - –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ **AUTHORIZED** –≤ **CONFIRMED**

2. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ Confirm:**
   - –°—Ä–µ–¥—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç –≤ —Ä–∞–º–∫–∞—Ö —Å–¥–µ–ª–∫–∏
   - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ —á–µ—Ä–µ–∑ `/e2c/v2/Init`

### –ö–æ–¥:

```typescript
// –ö–†–ò–¢–ò–ß–ù–û: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ –≤ –¢-–ë–∞–Ω–∫–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º —Å—Ä–µ–¥—Å—Ç–≤ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
if (customerPaymentId) {
    const { TBankClient } = await import('@/lib/tbank/client')
    const tbankClient = new TBankClient()
    const confirmResult = await tbankClient.confirmPayment(customerPaymentId)
    
    if (confirmResult.Success) {
        // –ü–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω, —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç
    }
}
```

---

## üìã –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- **multisplit.md**, —Ä–∞–∑–¥–µ–ª 6.1, –ø—É–Ω–∫—Ç 4:
  > "–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥–∏ –ü–æ–∫—É–ø–∞—Ç–µ–ª—é –ü–ª–æ—â–∞–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /v2/Confirm –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ —Å –ü–æ–∫—É–ø–∞—Ç–µ–ª—è"

- **multisplit.md**, —Ä–∞–∑–¥–µ–ª 4.1, –ø—É–Ω–∫—Ç 463-465:
  > "–∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ –∫–∞—Ä—Ç—É –ü—Ä–æ–¥–∞–≤—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–æ —Å–ø–∏—Å–∞–Ω–∏–µ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ü–æ–∫—É–ø–∞—Ç–µ–ª—è, –µ—Å—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞ –æ—Å—Ç–∞—Ç–∫–∞ –°–¥–µ–ª–∫–∏"

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏:
1. ‚úÖ –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –≤ –¢-–ë–∞–Ω–∫–µ —á–µ—Ä–µ–∑ Confirm
2. ‚úÖ –°—Ä–µ–¥—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–ª–∞—Ç (—Å—Ç–∞—Ç—É—Å CONFIRMED)
3. ‚úÖ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ PaymentId –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ Confirm –Ω–µ —É–¥–∞–ª—Å—è, –≤—ã–ø–ª–∞—Ç—ã –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 4-7 –¥–Ω–µ–π, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–ø–ª–∞—Ç—ã —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã.

