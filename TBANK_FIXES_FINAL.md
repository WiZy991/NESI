# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¢-–ë–∞–Ω–∫ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. ‚úÖ –£–±—Ä–∞–Ω NotificationURL –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤—ã–ø–ª–∞—Ç—É
**–ü—Ä–æ–±–ª–µ–º–∞:** NotificationURL –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ, —Ö–æ—Ç—è –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å—Ç—Ä. 896-908, 1742-1749) –µ–≥–æ –Ω–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–ª NotificationURL –∏–∑ –∑–∞–ø—Ä–æ—Å–∞. –¢-–ë–∞–Ω–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ URL, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.

### 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ñ–æ—Ä–º–∞—Ç—ã –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –°–ë–ü (—Å—Ç—Ä. 896-908):**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—Ä–∏–º–µ—Ä | –ù–∞—à –∑–∞–ø—Ä–æ—Å | –°—Ç–∞—Ç—É—Å |
|----------|--------|------------|--------|
| TerminalKey | "TerminalKeyE2C" | "1763372956356E2C" | ‚úÖ |
| OrderId | "testSBP 10" | "withdraw_..." | ‚úÖ |
| Phone | "79998887766" | "79140722203" | ‚úÖ |
| SbpMemberId | "100000000004" | "100000000004" | ‚úÖ |
| FinalPayout | "true" (—Å—Ç—Ä–æ–∫–∞) | –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º (–¥–ª—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç) | ‚úÖ |
| Amount | 100 (—á–∏—Å–ª–æ) | 10000 (—á–∏—Å–ª–æ) | ‚úÖ |
| DealId | "9043456" (—Å—Ç—Ä–æ–∫–∞) | "57185342" (—Å—Ç—Ä–æ–∫–∞) | ‚úÖ |
| PaymentRecipientId | "79066589133" (—Å—Ç—Ä–æ–∫–∞) | "79140722203" (—Å—Ç—Ä–æ–∫–∞) | ‚úÖ |
| Token | "..." | –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è | ‚úÖ |
| NotificationURL | –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | —É–±—Ä–∞–Ω | ‚úÖ |

### 3. ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞
**–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
1. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∫—Ä–æ–º–µ Token)
2. –î–æ–±–∞–≤–∏—Ç—å Password
3. –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–ª—é—á–∞–º
4. –ö–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ë–ï–ó –ø—Ä–æ–±–µ–ª–æ–≤
5. –í—ã—á–∏—Å–ª–∏—Ç—å SHA-256
6. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ hex

### 4. ‚úÖ –§–æ—Ä–º–∞—Ç CardData –¥–ª—è –≤—ã–ø–ª–∞—Ç –Ω–∞ –∫–∞—Ä—Ç—É
**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è CardData —á–µ—Ä–µ–∑ RSA:**
- –ï—Å–ª–∏ `TBANK_RSA_PUBLIC_KEY` –Ω–∞—Å—Ç—Ä–æ–µ–Ω, CardData –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä—É–µ—Ç—Å—è
- –§–æ—Ä–º–∞—Ç: RSA (X509 RSA 2048) + Base64
- –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞:

### –î–ª—è –°–ë–ü –≤—ã–ø–ª–∞—Ç:
```json
{
  "TerminalKey": "1763372956356E2C",
  "OrderId": "withdraw_...",
  "Phone": "79140722203",
  "SbpMemberId": "100000000004",
  "Amount": 10000,
  "DealId": "57185342",
  "PaymentRecipientId": "79140722203",
  "Token": "..."
}
```

**–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!**

## ‚ö†Ô∏è –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 3004 (–°–ë–ü –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¢-–ë–∞–Ω–∫–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª E2C: `1763372956356E2C`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –°–ë–ü –≤–∫–ª—é—á–µ–Ω –¥–ª—è —ç—Ç–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–í—ã–ø–ª–∞—Ç—ã"

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å E2C:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `TBANK_E2C_PASSWORD` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ E2C, –∞ –Ω–µ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL API:**
   - –ë–æ–µ–≤–æ–π: `https://securepay.tinkoff.ru/e2c/v2/Init/`
   - –¢–µ—Å—Ç–æ–≤—ã–π: `https://rest-api-test.tinkoff.ru/e2c/v2/Init/`

4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¢-–ë–∞–Ω–∫–∞:**
   - Email: acq_help@tbank.ru
   - –£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É 3004, —Ö–æ—Ç—è –°–ë–ü –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω
   - –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤)

## üîß –î–ª—è –≤—ã–ø–ª–∞—Ç –Ω–∞ –∫–∞—Ä—Ç—É:

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ CardData (–Ω–µ CardId), —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
1. –ü–æ–ª—É—á–µ–Ω RSA –∫–ª—é—á –æ—Ç –¢-–ë–∞–Ω–∫–∞
2. –î–æ–±–∞–≤–ª–µ–Ω `TBANK_RSA_PUBLIC_KEY` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. CardData –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω

## ‚úÖ –ò—Ç–æ–≥:

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¢-–ë–∞–Ω–∫–∞. –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –ø—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¢-–ë–∞–Ω–∫–∞
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–∞—Ä–æ–ª–µ E2C
- –ü—Ä–æ–±–ª–µ–º–∞—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –¢-–ë–∞–Ω–∫–∞ (–Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ)

