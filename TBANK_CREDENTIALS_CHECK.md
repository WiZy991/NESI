# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¢-–ë–∞–Ω–∫

## üìã –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ

### –î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (Acquiring):
- **Terminal_key:** `1763372956356`
- **Token_password:** `iGsy0RJ8%QqtBI3b`

### –î–ª—è –≤—ã–ø–ª–∞—Ç (E2C):
- **Terminal_key:** `1763372956356E2C` ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û**
- **Token_password:** `iGsy0RJ8%QqtBI3b` (—Ç–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- **merch_acc_id:** `300002425306` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ API)

---

## ‚úÖ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã

### 1. –ú–æ–∂–µ—Ç –ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `merch_acc_id` –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π?

**–ù–ï–¢, —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞!**

`merch_acc_id` (Merchant Account ID) - —ç—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—á–µ—Ç–∞ –º–µ—Ä—á–∞–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö –¢-–ë–∞–Ω–∫–∞
- –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è:
  - –û—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
  - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
  - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –±–∞–Ω–∫–∞

**–í –∫–æ–¥–µ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `merch_acc_id`.**

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `1763372956356E2C` –¥–ª—è –≤—ã–ø–ª–∞—Ç?

**–î–ê, –ê–ë–°–û–õ–Æ–¢–ù–û –ü–†–ê–í–ò–õ–¨–ù–û!** ‚úÖ

- **E2C** = E-commerce to Customer (–≤—ã–ø–ª–∞—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞–º)
- –î–ª—è –≤—ã–ø–ª–∞—Ç **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π E2C —Ç–µ—Ä–º–∏–Ω–∞–ª
- –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TBANK_E2C_TERMINAL_KEY`
- –ï—Å–ª–∏ E2C —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω, –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∫–∞–∫ fallback

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` –∏–ª–∏ `.env.local`:

```env
# –¢-–ë–∞–Ω–∫ API (–¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è)
TBANK_TERMINAL_KEY=1763372956356
TBANK_PASSWORD=iGsy0RJ8%QqtBI3b

# –¢-–ë–∞–Ω–∫ E2C API (–¥–ª—è –≤—ã–ø–ª–∞—Ç) - –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
TBANK_E2C_TERMINAL_KEY=1763372956356E2C

# URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –∏ –≤–µ–±—Ö—É–∫–æ–≤)
NEXT_PUBLIC_APP_URL=https://nesi.su

# –û–∫—Ä—É–∂–µ–Ω–∏–µ
NODE_ENV=production
```

**–í–∞–∂–Ω–æ:** 
- `TBANK_E2C_TERMINAL_KEY` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü–∞—Ä–æ–ª—å (`TBANK_PASSWORD`) –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –¥–ª—è –æ–±–æ–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- `merch_acc_id` –¥–æ–±–∞–≤–ª—è—Ç—å –ù–ï –Ω—É–∂–Ω–æ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ

### –î–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
```typescript
// src/lib/tbank.ts - createPayment()
const terminalKey = process.env.TBANK_TERMINAL_KEY  // 1763372956356
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: /v2/Init
```

### –î–ª—è –≤—ã–ø–ª–∞—Ç:
```typescript
// src/lib/tbank.ts - createWithdrawal()
const terminalKey = process.env.TBANK_E2C_TERMINAL_KEY || process.env.TBANK_TERMINAL_KEY
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: /e2c/v2/Init
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **E2C —Ç–µ—Ä–º–∏–Ω–∞–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –≤—ã–ø–ª–∞—Ç**
   - –ë–µ–∑ –Ω–µ–≥–æ –≤—ã–ø–ª–∞—Ç—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `TBANK_E2C_TERMINAL_KEY`

2. **–ü–∞—Ä–æ–ª—å –æ–¥–∏–Ω –¥–ª—è –æ–±–æ–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Token
   - –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

3. **merch_acc_id –Ω–µ –Ω—É–∂–µ–Ω**
   - –≠—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–∞–Ω–∫–∞
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] `TBANK_TERMINAL_KEY` = `1763372956356` (–¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è)
- [x] `TBANK_E2C_TERMINAL_KEY` = `1763372956356E2C` (–¥–ª—è –≤—ã–ø–ª–∞—Ç) ‚úÖ
- [x] `TBANK_PASSWORD` = `iGsy0RJ8%QqtBI3b`
- [x] `NEXT_PUBLIC_APP_URL` = `https://nesi.su`
- [ ] `merch_acc_id` - **–ù–ï –ù–£–ñ–ï–ù** ‚úÖ

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ DealId (—Å–º. `TBANK_DEALID_SOLUTION.md`)

