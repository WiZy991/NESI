# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç –¢-–ë–∞–Ω–∫ (–ú—É–ª—å—Ç–∏—Ä–∞—Å—á–µ—Ç—ã)

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

### 1. **DealId –±—ã–ª –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º, –Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ú**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ç–∫–æ —É–∫–∞–∑–∞–Ω–æ: `DealId Number –î–∞` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 
     - DealId —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ `CreateWithdrawalParams`
     - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ DealId –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω —è–≤–Ω–æ
     - –ï—Å–ª–∏ DealId –Ω–µ –Ω–∞–π–¥–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º

### 2. **–ú–µ—Ç–æ–¥ Payment –≤—ã–∑—ã–≤–∞–ª—Å—è –¥–ª—è –≤—Å–µ—Ö –≤—ã–ø–ª–∞—Ç, –≤–∫–ª—é—á–∞—è –°–ë–ü**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: "–ü—Ä–∏ –≤—ã–ø–ª–∞—Ç–µ –ø–æ –°–ë–ü –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ Payment. –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ Init."
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
     - –ú–µ—Ç–æ–¥ `confirmWithdrawal` (Payment) —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –≤—ã–ø–ª–∞—Ç –Ω–∞ –∫–∞—Ä—Ç—É
     - –î–ª—è –≤—ã–ø–ª–∞—Ç –ø–æ –°–ë–ü –º–µ—Ç–æ–¥ Payment –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

### 3. **DealId –Ω–µ –∏—Å–∫–∞–ª—Å—è –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤—ã–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç DealId, –∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—ã—Ç–∞–ª–∞—Å—å –µ–≥–æ –Ω–∞–π—Ç–∏
   - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
     - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å DealId
     - –ï—Å–ª–∏ DealId –Ω–µ –Ω–∞–π–¥–µ–Ω - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å

## üìã –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### `src/lib/tbank.ts`:
1. ‚úÖ `dealId` –≤ `CreateWithdrawalParams` —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (–Ω–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è DealId –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞
3. ‚úÖ –í—ã–±—Ä–æ—Å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ DealId –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω

### `src/app/api/wallet/tbank/create-withdrawal/route.ts`:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ DealId –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è DealId –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –≤—ã–ø–ª–∞—Ç—ã
3. ‚úÖ –ú–µ—Ç–æ–¥ Payment –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –≤—ã–ø–ª–∞—Ç –Ω–∞ –∫–∞—Ä—Ç—É
4. ‚úÖ –î–ª—è –≤—ã–ø–ª–∞—Ç –ø–æ –°–ë–ü Payment –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

## üîç –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

### –ò–∑ `vyplaty-multisplit.md`:
- **–¢–∞–±–ª–∏—Ü–∞ 2.4.2:** `DealId Number –î–∞` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
- **–†–∞–∑–¥–µ–ª 2.5:** "–ü—Ä–∏ –≤—ã–ø–ª–∞—Ç–µ –ø–æ –°–ë–ü –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ Payment"
- **–†–∞–∑–¥–µ–ª 6.1, –ø—É–Ω–∫—Ç 5:** "–î–ª—è –≤—ã–ø–ª–∞—Ç—ã –ü—Ä–æ–¥–∞–≤—Ü—É –ø–ª–æ—â–∞–¥–∫–∞ –≤ –º–µ—Ç–æ–¥ /e2c/v2/Init –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—É–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—É–º–º—É —Å–ø–∏—Å–∞–Ω–∏–π –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º, –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä DealId"

### –ò–∑ `multisplit.md`:
- **–†–∞–∑–¥–µ–ª 6.1, –ø—É–Ω–∫—Ç 5:** "–î–ª—è –≤—ã–ø–ª–∞—Ç—ã –ü—Ä–æ–¥–∞–≤—Ü—É –ø–ª–æ—â–∞–¥–∫–∞ –≤ –º–µ—Ç–æ–¥ /e2c/v2/Init –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—É–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—É–º–º—É —Å–ø–∏—Å–∞–Ω–∏–π –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º, –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä DealId"
- **–†–∞–∑–¥–µ–ª 6.1, –ø—É–Ω–∫—Ç 6:** "–í –º–µ—Ç–æ–¥ /e2c/v2/Payment –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è PaymentId, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ /e2c/v2/Init" (—Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ä—Ç)

## ‚úÖ –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **–ü—Ä–∏ –≤—ã–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤:**
   - –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π DealId –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ï—Å–ª–∏ DealId –Ω–µ –Ω–∞–π–¥–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–∞—è –æ—à–∏–±–∫–∞
   - DealId –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–ª–∞—Ç—É

2. **–î–ª—è –≤—ã–ø–ª–∞—Ç –ø–æ –°–ë–ü:**
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –≤—ã–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ `/e2c/v2/Init`
   - –ú–µ—Ç–æ–¥ Payment –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   - –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–î–ª—è –≤—ã–ø–ª–∞—Ç –Ω–∞ –∫–∞—Ä—Ç—É:**
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –≤—ã–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ `/e2c/v2/Init`
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ Payment –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
   - –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## üö® –í–∞–∂–Ω–æ:

- **DealId –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑ —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å–¥–µ–ª–∫–∏** (–ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞)
- **–î–ª—è –≤—ã–ø–ª–∞—Ç –ø–æ –°–ë–ü Payment –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** - —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ
- **FinalPayout** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Boolean (true/false), –Ω–µ —Å—Ç—Ä–æ–∫–∞

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞ DealId —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–µ–±—Ö—É–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç SpAccumulationId/DealId
3. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

