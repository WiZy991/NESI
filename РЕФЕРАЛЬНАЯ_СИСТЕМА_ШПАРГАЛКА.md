# üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ - –®–ø–∞—Ä–≥–∞–ª–∫–∞

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (2 –º–∏–Ω—É—Ç—ã)

### 1Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥
```
‚Üí –í–æ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç
‚Üí –û—Ç–∫—Ä—ã—Ç—å /referral
‚Üí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
```

### 2Ô∏è‚É£ –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞
```
‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –¥—Ä—É–≥—É
‚Üí –î—Ä—É–≥ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –ò–°–ü–û–õ–ù–ò–¢–ï–õ–¨
‚Üí –î—Ä—É–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç email
```

### 3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å
```
‚Üí –î—Ä—É–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É
‚Üí –ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É
‚Üí –í–´ –ø–æ–ª—É—á–∞–µ—Ç–µ 5% –Ω–∞ –±–∞–ª–∞–Ω—Å! üí∞
```

---

## üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –±–æ–Ω—É—Å–æ–≤

```
–ó–∞–¥–∞—á–∞ 1000‚ÇΩ  ‚Üí –ë–æ–Ω—É—Å 50‚ÇΩ   (5%)
–ó–∞–¥–∞—á–∞ 5000‚ÇΩ  ‚Üí –ë–æ–Ω—É—Å 250‚ÇΩ  (5%)
–ó–∞–¥–∞—á–∞ 10000‚ÇΩ ‚Üí –ë–æ–Ω—É—Å 500‚ÇΩ  (5%)
```

**–õ–∏–º–∏—Ç:** –ü–µ—Ä–≤—ã–µ 5 –∑–∞–¥–∞—á –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞

**–ü—Ä–∏–º–µ—Ä:**
```
–î—Ä—É–≥ –∑–∞–≤–µ—Ä—à–∏–ª 3 –∑–∞–¥–∞—á–∏ –ø–æ 2000‚ÇΩ –∫–∞–∂–¥–∞—è
2000‚ÇΩ √ó 5% √ó 3 = 300‚ÇΩ –≤ –≤–∞—à–µ–º –∫–∞—Ä–º–∞–Ω–µ! üéâ
```

---

## üìç –ì–¥–µ —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è

| –§—É–Ω–∫—Ü–∏—è | URL | –ß—Ç–æ —Ç–∞–º |
|---------|-----|---------|
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** | `/referral` | –ö–æ–¥, —Å—Å—ã–ª–∫–∞, —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤, –∏—Å—Ç–æ—Ä–∏—è |
| **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** | `/register?ref=CODE` | –§–æ—Ä–º–∞ —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞ |
| **–ü—Ä–æ—Ñ–∏–ª—å** | `/profile` | –ë–∞–ª–∞–Ω—Å, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–≤–∏–¥–Ω—ã –±–æ–Ω—É—Å—ã) |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | üîî –≤ —Ö–µ–¥–µ—Ä–µ | "–í—ã –ø–æ–ª—É—á–∏–ª–∏ 50‚ÇΩ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞!" |

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

### –î–ª—è —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ (–∫—Ç–æ –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç):
- [ ] –ö–æ–¥ –ø–æ—è–≤–∏–ª—Å—è –Ω–∞ `/referral`
- [ ] –°—Å—ã–ª–∫–∞ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è
- [ ] –î—Ä—É–≥ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è
- [ ] –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –¥—Ä—É–≥–∞ ‚Üí –±–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–ª—Å—è
- [ ] –í –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–Ω—É—Å–æ–≤ –ø–æ—è–≤–∏–ª–∞—Å—å –∑–∞–ø–∏—Å—å

### –î–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞ (–∫–æ–≥–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏):
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è —Å –∫–æ–¥–æ–º
- [ ] –†–æ–ª—å: **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**
- [ ] Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
- [ ] –í—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á—É
- [ ] –ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–≤–µ—Ä—à–∏–ª –∑–∞–¥–∞—á—É

### –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É
SELECT referredById FROM User WHERE email = 'referral@test.com';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ–Ω—É—Å—ã
SELECT * FROM ReferralBonus WHERE referrerId = '[ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞]';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
SELECT balance FROM User WHERE id = '[ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞]';
```

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "–ë–æ–Ω—É—Å –Ω–µ –Ω–∞—á–∏—Å–ª–∏–ª—Å—è"
‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:**
1. –†–µ—Ñ–µ—Ä–∞–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è —Å –∫–æ–¥–æ–º?
2. –†–µ—Ñ–µ—Ä–∞–ª = **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**?
3. –ó–∞–¥–∞—á–∞ **–∑–∞–≤–µ—Ä—à–µ–Ω–∞**?
4. –ù–µ –±–æ–ª—å—à–µ 5 –∑–∞–¥–∞—á –æ—Ç —ç—Ç–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞?

### "–ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:**
1. –ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥—ë–Ω? (8 —Å–∏–º–≤–æ–ª–æ–≤, A-Z, 0-9)
2. –ö–æ–¥ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î?
3. –†–µ–≥–∏—Å—Ç—Ä: `abc123` ‚Üí `ABC123`

### "Prisma –æ—à–∏–±–∫–∞"
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
npx prisma generate
npm run dev
```

---

## üìä API Endpoints (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

```typescript
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
GET /api/referral
‚Üí { referralCode, referralCount, totalEarned, referrals[], bonuses[] }

// –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ (–µ—Å–ª–∏ –Ω–µ—Ç)
POST /api/referral/generate
‚Üí { referralCode: "ABC12345" }

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –∫–æ–¥–æ–º
POST /api/auth/register
Body: { email, password, fullName, role, referralCode }

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª—è–µ—Ç –±–æ–Ω—É—Å)
PATCH /api/tasks/[id]/complete
‚Üí –¢—Ä–∏–≥–≥–µ—Ä: grantReferralBonus()
```

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –¢–µ—Å—Ç –∑–∞ 5 –º–∏–Ω—É—Ç:
```
1. –ë—Ä–∞—É–∑–µ—Ä 1 (Chrome): –í–æ–π—Ç–∏ ‚Üí /referral ‚Üí –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
2. –ë—Ä–∞—É–∑–µ—Ä 2 (Firefox): –í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
3. –ë—Ä–∞—É–∑–µ—Ä 1: –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É 1000‚ÇΩ
4. –ë—Ä–∞—É–∑–µ—Ä 2: –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
5. –ë—Ä–∞—É–∑–µ—Ä 1: –ü—Ä–∏–Ω—è—Ç—å ‚Üí –ó–∞–≤–µ—Ä—à–∏—Ç—å
6. –ë—Ä–∞—É–∑–µ—Ä 1: /referral ‚Üí –í–∏–¥–∏–º +50‚ÇΩ! üéâ
```

### –¢–µ—Å—Ç –ª–∏–º–∏—Ç–∞ (5 –∑–∞–¥–∞—á):
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ 6 –∑–∞–¥–∞—á –ø–æ–¥—Ä—è–¥
for i in 1 2 3 4 5 6; do
  echo "–ó–∞–¥–∞—á–∞ $i"
  # –ü–æ—Å–ª–µ 5-–π –±–æ–Ω—É—Å—ã –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è
done
```

---

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –∑–∞–¥–∞—á–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
```
–ó–∞–¥–∞—á–∞ 2000‚ÇΩ ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∞
–†–µ—Ñ–µ—Ä–µ—Ä: +100‚ÇΩ ‚úÖ
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–í—ã –ø–æ–ª—É—á–∏–ª–∏ 100‚ÇΩ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞!" ‚úÖ
–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è: type = 'referral_bonus' ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –®–µ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
```
–ó–∞–¥–∞—á–∞ 2000‚ÇΩ ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–∞
–†–µ—Ñ–µ—Ä–µ—Ä: +0‚ÇΩ (–ª–∏–º–∏—Ç 5 –∑–∞–¥–∞—á) ‚ùå
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –Ω–µ—Ç ‚ùå
–ö–æ–Ω—Å–æ–ª—å: "‚ö†Ô∏è –õ–∏–º–∏—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç" ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–µ—Ñ–µ—Ä–∞–ª –±–µ–∑ —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
```
–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –±–µ–∑ referredById ‚Üí –ó–∞–≤–µ—Ä—à–∏–ª –∑–∞–¥–∞—á—É
–ù–∏–∫—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å (–Ω–æ—Ä–º–∞–ª—å–Ω–æ) ‚úÖ
```

---

## üìà KPI —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```sql
-- –í—Å–µ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
SELECT COUNT(*) FROM User WHERE referredById IS NOT NULL;

-- –¢–æ–ø —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤
SELECT referredById, COUNT(*) as cnt 
FROM User 
WHERE referredById IS NOT NULL 
GROUP BY referredById 
ORDER BY cnt DESC 
LIMIT 10;

-- –í—Å–µ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–æ –±–æ–Ω—É—Å–æ–≤
SELECT SUM(amount) FROM ReferralBonus;

-- –°—Ä–µ–¥–Ω–∏–π –±–æ–Ω—É—Å
SELECT AVG(amount) FROM ReferralBonus;
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø_–†–ï–§–ï–†–ê–õ–¨–ù–û–ô_–°–ò–°–¢–ï–ú–´.md`
- **–ö–æ–¥ –ª–æ–≥–∏–∫–∏:** `src/lib/referral.ts`
- **API:** `src/app/api/referral/`
- **UI:** `src/app/referral/page.tsx`
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `src/app/register/page.tsx`

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.

**–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ! üí∞**

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 1 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

