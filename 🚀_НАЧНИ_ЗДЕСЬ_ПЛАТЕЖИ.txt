===============================================
üöÄ –°–ò–°–¢–ï–ú–ê –î–ï–ù–ï–ì –ò –ü–õ–ê–¢–ï–ñ–ï–ô - –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢
===============================================

‚úÖ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û:

1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–ø–µ–µ–∫ (Decimal –≤–º–µ—Å—Ç–æ Int)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –≤–∑—è—Ç–∏–µ–º –∑–∞–¥–∞—á
3. –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å (–¥–µ–Ω—å–≥–∏ –≤ —Ä–∞–±–æ—Ç–µ)
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
5. –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

===============================================
üìù –®–ê–ì–ò –î–õ–Ø –ó–ê–ü–£–°–ö–ê:
===============================================

–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ÆKassa
-----------------------
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://yookassa.ru/
2. –°–æ–∑–¥–∞–π—Ç–µ –º–∞–≥–∞–∑–∏–Ω
3. –ü–æ–ª—É—á–∏—Ç–µ Shop ID –∏ Secret Key

–®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –≤ .env
-----------------------
YOOKASSA_SHOP_ID="–≤–∞—à_shop_id"
YOOKASSA_SECRET_KEY="–≤–∞—à_secret_key"
NEXT_PUBLIC_BASE_URL="http://localhost:3000"

–®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
--------------------------
cd NESI
npx prisma generate
npx prisma migrate deploy

–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±—Ö—É–∫
------------------------
–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa:
URL: https://yourdomain.com/api/wallet/yookassa-webhook
–°–æ–±—ã—Ç–∏–µ: payment.succeeded

===============================================
üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´:
===============================================

Backend:
--------
‚úÖ src/lib/money.ts - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –¥–µ–Ω–µ–≥
‚úÖ src/lib/yookassa.ts - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa
‚úÖ src/app/api/wallet/create-payment/route.ts
‚úÖ src/app/api/wallet/check-payment/route.ts
‚úÖ src/app/api/wallet/yookassa-webhook/route.ts

Frontend:
---------
‚úÖ src/components/DepositBalanceModal.tsx - –û–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
‚úÖ src/app/wallet/payment-result/page.tsx - –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–ª–∞—Ç—ã

–û–±–Ω–æ–≤–ª–µ–Ω–æ:
----------
‚úÖ src/app/api/tasks/[id]/assign/route.ts - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
‚úÖ src/app/api/tasks/[id]/complete/route.ts - Decimal
‚úÖ src/app/api/wallet/balance/route.ts - –î–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å
‚úÖ src/app/api/wallet/withdraw/route.ts - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–º–æ—Ä–æ–∑–∫–∏

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
------------
‚úÖ prisma/schema.prisma - –û–±–Ω–æ–≤–ª–µ–Ω–∞
‚úÖ prisma/migrations/_convert_money_to_decimal/migration.sql

===============================================
üéØ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
===============================================

1. –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å:
--------------------
import DepositBalanceModal from '@/components/DepositBalanceModal'

<DepositBalanceModal 
  isOpen={show} 
  onClose={() => setShow(false)} 
/>

2. –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å:
-------------------
const res = await fetch('/api/wallet/balance')
const { balance, frozenBalance, availableBalance } = await res.json()

3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏:
------------------------
import { formatMoney } from '@/lib/money'
console.log(formatMoney(1234.56)) // "1234.56 ‚ÇΩ"

===============================================
üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:
===============================================

–¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞: 5555 5555 5555 4477
CVC: –ª—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã
–°—Ä–æ–∫: –ª—é–±–∞—è –±—É–¥—É—â–∞—è –¥–∞—Ç–∞

–°—Ü–µ–Ω–∞—Ä–∏–π:
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
2. –ù–∞–∂–∞—Ç—å "–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
3. –í–≤–µ—Å—Ç–∏ —Å—É–º–º—É 100.50
4. –û–ø–ª–∞—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏–ª—Å—è

===============================================
üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:
===============================================

üìñ PAYMENT_SETUP.md - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
üìñ MONEY_AND_PAYMENTS_README.md - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
üìñ ENV_SETUP.md - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

===============================================
üî• –ö–õ–Æ–ß–ï–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:
===============================================

‚ùå –ë–´–õ–û:
--------
- balance: Int (–±–µ–∑ –∫–æ–ø–µ–µ–∫)
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞
- –ú–æ–∂–Ω–æ —É–π—Ç–∏ –≤ –º–∏–Ω—É—Å
- –ù–µ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

‚úÖ –°–¢–ê–õ–û:
---------
- balance: Decimal(10,2) (—Å –∫–æ–ø–µ–π–∫–∞–º–∏)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–π—Ç–∏ –≤ –º–∏–Ω—É—Å
- –ÆKassa –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è

===============================================
‚ö†Ô∏è –í–ê–ñ–ù–û:
===============================================

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ü–ï–†–ï–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
   npx prisma migrate deploy

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±—Ö—É–∫ –≤ –ÆKassa –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ
   –∑–∞—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤

3. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏–∑–º–µ–Ω–∏—Ç–µ NEXT_PUBLIC_BASE_URL
   –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω

===============================================
‚úÖ –ì–û–¢–û–í–û!
===============================================

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
- –ü–æ–ø–æ–ª–Ω—è—Ç—å –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ –ÆKassa
- –ë—Ä–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
- –†–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–ø–µ–π–∫–∞–º–∏ (123.45 ‚ÇΩ)
- –í–∏–¥–µ—Ç—å –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞

–£–¥–∞—á–∏! üöÄ

===============================================

