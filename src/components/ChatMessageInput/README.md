# ChatMessageInput Component Refactoring

## Структура компонента

Компонент `ChatMessageInput` был разбит на несколько меньших компонентов для улучшения читаемости и поддерживаемости кода.

## Созданные компоненты

### 1. `types.ts`
Содержит все типы TypeScript, используемые в компоненте:
- `MessageInputProps`
- `ComposerAttachment`
- `VoiceMetadata`
- `TypingContext`
- `AttachmentKind`

### 2. `utils.ts`
Содержит утилитарные функции:
- `extractWaveform` - извлечение waveform из аудио
- `formatDuration` - форматирование длительности
- `formatFileSize` - форматирование размера файла
- `detectAttachmentKind` - определение типа вложения
- `createAttachmentId` - создание уникального ID для вложения
- `getTruncatedFileName` - сокращение имени файла
- `emojiList` - список эмодзи

### 3. `ReplyPreview.tsx`
Компонент для отображения превью ответа на сообщение.

### 4. `RecordingIndicator.tsx`
Компонент для отображения индикатора записи голосового сообщения.

### 5. `AttachmentsPreview.tsx`
Компонент для отображения списка вложений с превью и прогрессом загрузки.

### 6. `EmojiPicker.tsx`
Компонент для выбора эмодзи.

## Следующие шаги

1. Создать компонент `MessageInputField` для поля ввода текста
2. Создать компонент `SendButton` для кнопки отправки
3. Создать компонент `VoiceRecorder` для записи голосовых сообщений
4. Обновить основной файл `ChatMessageInput.tsx` для использования новых компонентов

## Преимущества рефакторинга

- Улучшенная читаемость кода
- Легче тестировать отдельные компоненты
- Переиспользование компонентов
- Упрощенная поддержка и отладка

