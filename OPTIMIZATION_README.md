# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ NESI - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üì¶ –û–±–∑–æ—Ä

–Ø —Å–æ–∑–¥–∞–ª –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è **–∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ NESI. –í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é!

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
- –í—ã—è–≤–∏–ª —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ API, –ë–î –∏ frontend
- –û–ø—Ä–µ–¥–µ–ª–∏–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- –°–æ—Å—Ç–∞–≤–∏–ª –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–°–æ–∑–¥–∞–Ω–æ **10 —Ñ–∞–π–ª–æ–≤** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```
optimization-files/
‚îú‚îÄ‚îÄ üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (5 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ START_HERE.md              ‚≠ê –ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!
‚îÇ   ‚îú‚îÄ‚îÄ QUICK_COMMANDS.md          –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ –ö–ê–ö_–ü–†–ò–ú–ï–ù–ò–¢–¨.md           –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ APPLY_OPTIMIZATIONS.md     –î–µ—Ç–∞–ª—å–Ω—ã–π –≥–∞–π–¥
‚îÇ   ‚îî‚îÄ‚îÄ README.md                  –û–±–∑–æ—Ä –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ üîß –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ (3 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ categoryCache.ts           –ö–µ—à –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ redis.ts                   Redis –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ optimized-chats-route.ts   –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API
‚îÇ
‚îî‚îÄ‚îÄ üöÄ –°–∫—Ä–∏–ø—Ç—ã (3 —Ñ–∞–π–ª–∞)
    ‚îú‚îÄ‚îÄ apply-optimizations.sh     –ê–≤—Ç–æ-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
    ‚îú‚îÄ‚îÄ add_indexes.sql            –ò–Ω–¥–µ–∫—Å—ã –ë–î
    ‚îî‚îÄ‚îÄ redis-setup.sh             –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (10 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª

```
üìÑ optimization-files/START_HERE.md
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:**

```powershell
cd C:\Users\Perfercher\Desktop\nesi\NESI
scp -r optimization-files nesi@–≤–∞—à-—Å–µ—Ä–≤–µ—Ä:/home/nesi/nesi-app/
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
cd /home/nesi/nesi-app
chmod +x optimization-files/apply-optimizations.sh
bash optimization-files/apply-optimizations.sh
```

### –®–∞–≥ 3: –ì–æ—Ç–æ–≤–æ! ‚úÖ

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API

| Endpoint                | –ë—ã–ª–æ    | –°—Ç–∞–ª–æ    | –£–ª—É—á—à–µ–Ω–∏–µ   |
| ----------------------- | ------- | -------- | ----------- |
| **GET /api/chats**      | 2-5 —Å–µ–∫ | 0.3 —Å–µ–∫  | **-85%** üî• |
| **GET /api/tasks**      | 0.8 —Å–µ–∫ | 0.3 —Å–µ–∫  | **-62%**    |
| **GET /api/categories** | 0.2 —Å–µ–∫ | 0.05 —Å–µ–∫ | **-75%**    |

### –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

- üìâ **–ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î:** -60%
- üìâ **CPU usage:** -40%
- üìâ **Memory usage:** -25%
- üìà **Throughput:** +150%

### –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

- üè† **–ì–ª–∞–≤–Ω–∞—è:** 2.5s ‚Üí 1.2s (-52%)
- üìã **–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á:** 1.8s ‚Üí 0.8s (-55%)
- üí¨ **–ß–∞—Ç—ã:** 5+ —Å–µ–∫ ‚Üí 1.5s (-70%)

---

## üéØ –ß—Ç–æ –±—É–¥–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

### 1Ô∏è‚É£ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–°–æ–∑–¥–∞–Ω–æ 10 —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤:**

- ‚úÖ Task: —Å—Ç–∞—Ç—É—Å + –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- ‚úÖ Task: –∑–∞–∫–∞–∑—á–∏–∫ + –¥–∞—Ç–∞
- ‚úÖ Task: –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –¥–∞—Ç–∞
- ‚úÖ Message: –∑–∞–¥–∞—á–∞ + –¥–∞—Ç–∞
- ‚úÖ Notification: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + –ø—Ä–æ—á–∏—Ç–∞–Ω–æ + –¥–∞—Ç–∞
- ‚úÖ PrivateMessage: –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å + –¥–∞—Ç–∞
- ‚úÖ PrivateMessage: –ø–æ–ª—É—á–∞—Ç–µ–ª—å + –¥–∞—Ç–∞
- ‚úÖ CommunityPost: –∞–≤—Ç–æ—Ä + –¥–∞—Ç–∞
- ‚úÖ CommunityComment: –ø–æ—Å—Ç + –¥–∞—Ç–∞
- ‚úÖ TaskResponse: –∑–∞–¥–∞—á–∞ + –¥–∞—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ 40-50% –±—ã—Å—Ç—Ä–µ–µ

---

### 2Ô∏è‚É£ API Endpoints

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:**

- ‚úÖ `/api/chats` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è, select –≤–º–µ—Å—Ç–æ include
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ - in-memory –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (TTL: 1 —á–∞—Å)
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–¥–µ–∫—Å—ã –ë–î

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–æ –Ω–∞ 60-85%

---

### 3Ô∏è‚É£ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω–æ:**

- ‚úÖ In-memory –∫–µ—à –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (categoryCache.ts)
- ‚úÖ Redis –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–µ—à–∞ (redis.ts)
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∫–ª—é—á–µ–π –∏ TTL

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î –Ω–∞ 60%

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 1. `START_HERE.md` ‚≠ê

**–î–ª—è –∫–æ–≥–æ:** –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –ß–µ–∫–ª–∏—Å—Ç

#### 2. `QUICK_COMMANDS.md`

**–î–ª—è –∫–æ–≥–æ:** –î–ª—è —Ç–µ—Ö, –∫–æ–º—É –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### 3. `–ö–ê–ö_–ü–†–ò–ú–ï–ù–ò–¢–¨.md`

**–î–ª—è –∫–æ–≥–æ:** –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è (–∞–≤—Ç–æ + —Ä—É—á–Ω–æ–π)
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### 4. `APPLY_OPTIMIZATIONS.md`

**–î–ª—è –∫–æ–≥–æ:** –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

#### 5. `README.md`

**–î–ª—è –∫–æ–≥–æ:** –û–±–∑–æ—Ä –≤—Å–µ–π –ø–∞–ø–∫–∏  
**–°–æ–¥–µ—Ä–∂–∏—Ç:**

- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- –ß–µ–∫–ª–∏—Å—Ç

---

### üîß –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

#### 6. `categoryCache.ts`

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:** `src/lib/categoryCache.ts`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** In-memory –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π  
**–§—É–Ω–∫—Ü–∏–∏:**

- `getCachedCategories()` - –ø–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `invalidateCategoryCache()` - –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -75% –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### 7. `redis.ts`

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:** `src/lib/redis.ts`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Redis –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–µ—à–∞  
**–§—É–Ω–∫—Ü–∏–∏:**

- `cacheGet<T>(key)` - –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–µ—à–∞
- `cacheSet(key, value, ttl)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–µ—à
- `cacheDelete(key)` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–µ—à–∞
- `getCacheStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ -20-30% –Ω–∞–≥—Ä—É–∑–∫–∏

#### 8. `optimized-chats-route.ts`

**–ö—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:** `src/app/api/chats/route.ts`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è API —á–∞—Ç–æ–≤  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è (limit 100)
- `select` –≤–º–µ—Å—Ç–æ `include`
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -85% –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞! üî•

---

### üöÄ –°–∫—Ä–∏–ø—Ç—ã

#### 9. `apply-optimizations.sh`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π  
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

1. –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î
2. –ö–æ–ø–∏—Ä—É–µ—Ç categoryCache.ts
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç API —á–∞—Ç–æ–≤
4. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
chmod +x optimization-files/apply-optimizations.sh
bash optimization-files/apply-optimizations.sh
```

#### 10. `add_indexes.sql`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤  
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –°–æ–∑–¥–∞–µ—Ç 10 —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
psql -U nesi_user -d nesi_db -h localhost < add_indexes.sql
```

#### 11. `redis-setup.sh`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redis  
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Redis —Å–µ—Ä–≤–µ—Ä
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–ª—è production
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ioredis –≤ –ø—Ä–æ–µ–∫—Ç
- –û–±–Ω–æ–≤–ª—è–µ—Ç .env

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
chmod +x optimization-files/redis-setup.sh
bash optimization-files/redis-setup.sh
```

---

## üéØ –ü–ª–∞–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚ö° (–°–µ–≥–æ–¥–Ω—è - 30 –º–∏–Ω—É—Ç)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î
2. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à –∫–∞—Ç–µ–≥–æ—Ä–∏–π
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å API —á–∞—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +70% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

### –≠—Ç–∞–ø 2: Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ üì¶ (–ó–∞–≤—Ç—Ä–∞ - 1 —á–∞—Å)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis
2. –î–æ–±–∞–≤–∏—Ç—å redis.ts –≤ –ø—Ä–æ–µ–∫—Ç
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ API

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +20-30% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

### –≠—Ç–∞–ø 3: Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è üé® (–°–ª–µ–¥ –Ω–µ–¥–µ–ª—è - 2-3 —á–∞—Å–∞)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. Code splitting –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤ React
3. Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** +30-40% —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
psql -U nesi_user -d nesi_db -h localhost -c "
SELECT COUNT(*) FROM pg_indexes WHERE indexname LIKE 'idx_%';
"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: ~10 –∏–Ω–¥–µ–∫—Å–æ–≤

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs nesi-app | grep -i "cache"
# –û–∂–∏–¥–∞–µ—Ç—Å—è: "‚úÖ Categories from cache"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
cd load-tests
npm run test:api
# –°—Ä–∞–≤–Ω–∏—Ç—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

```sql
SELECT tablename, indexname, idx_scan as scans
FROM pg_stat_user_indexes
WHERE indexname LIKE 'idx_%'
ORDER BY idx_scan DESC;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞ (–µ—Å–ª–∏ Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
redis-cli INFO stats
redis-cli DBSIZE
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
pm2 monit
pm2 logs nesi-app --lines 100
```

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ `–ö–ê–ö_–ü–†–ò–ú–ï–ù–ò–¢–¨.md`

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å API —á–∞—Ç–æ–≤
cp src/app/api/chats/route.ts.backup src/app/api/chats/route.ts

# –£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
psql -U nesi_user -d nesi_db -h localhost << 'EOF'
DROP INDEX IF EXISTS idx_tasks_status_created;
-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
EOF

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
npm run build
pm2 restart nesi-app
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

### –ë–∞–∑–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- [ ] –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –°–∫—Ä–∏–ø—Ç `apply-optimizations.sh` –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î (~10 —à—Ç)
- [ ] –§–∞–π–ª `categoryCache.ts` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] API `/api/chats` –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã - –Ω–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É–ª—É—á—à–µ–Ω–∏–µ

### Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] –§–∞–π–ª `redis.ts` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] Redis –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ API
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Redis —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ò—Ç–æ–≥

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –≤–∞—à –ø—Ä–æ–µ–∫—Ç NESI –±—É–¥–µ—Ç:

- ‚ö° **–í 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ** –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- üíæ **–ù–∞ 60% –º–µ–Ω—å—à–µ** –Ω–∞–≥—Ä—É–∂–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- üöÄ **–ù–∞ 40% –±—ã—Å—Ç—Ä–µ–µ** –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üí∞ **–≠–∫–æ–Ω–æ–º–∏—Ç—å** —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞
- üéØ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å** –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üöÄ –ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª: `optimization-files/START_HERE.md`
2. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!

---

**–£–¥–∞—á–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π! üéâ**

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–∞—Ö –ø–∞–ø–∫–∏ `optimization-files/`
