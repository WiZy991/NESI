# üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π NESI

## 1. –°–∫–µ–ª–µ—Ç–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á

### –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `src/components/TaskSkeleton.tsx`:

```tsx
export default function TaskSkeleton() {
  return (
    <div className="animate-pulse">
      <div className="p-4 bg-black/40 border border-emerald-500/30 rounded-xl space-y-4">
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
        <div className="h-6 bg-emerald-500/20 rounded w-3/4" />
        
        {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
        <div className="space-y-2">
          <div className="h-4 bg-emerald-500/10 rounded w-full" />
          <div className="h-4 bg-emerald-500/10 rounded w-5/6" />
        </div>
        
        {/* –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
        <div className="flex gap-4">
          <div className="h-4 bg-emerald-500/10 rounded w-20" />
          <div className="h-4 bg-emerald-500/10 rounded w-24" />
        </div>
      </div>
    </div>
  )
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `TaskCatalogPage.tsx`:

```tsx
import TaskSkeleton from '@/components/TaskSkeleton'

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
{loading ? (
  <div className="space-y-4">
    {[...Array(6)].map((_, i) => (
      <TaskSkeleton key={i} />
    ))}
  </div>
) : (
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å –∑–∞–¥–∞—á–∞–º–∏
)}
```

---

## 2. –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `src/components/EmptyState.tsx`:

```tsx
import { LucideIcon } from 'lucide-react'
import Link from 'next/link'

type EmptyStateProps = {
  icon: LucideIcon
  title: string
  description: string
  actionLabel?: string
  actionHref?: string
}

export default function EmptyState({
  icon: Icon,
  title,
  description,
  actionLabel,
  actionHref,
}: EmptyStateProps) {
  return (
    <div className="flex flex-col items-center justify-center py-16 px-4 text-center">
      <div className="w-20 h-20 rounded-full bg-emerald-500/10 flex items-center justify-center mb-6">
        <Icon className="w-10 h-10 text-emerald-400" />
      </div>
      <h3 className="text-xl font-semibold text-white mb-2">{title}</h3>
      <p className="text-gray-400 mb-6 max-w-md">{description}</p>
      {actionLabel && actionHref && (
        <Link
          href={actionHref}
          className="px-6 py-3 bg-emerald-500/20 border border-emerald-400/50 text-emerald-300 rounded-lg hover:bg-emerald-500/30 transition"
        >
          {actionLabel}
        </Link>
      )}
    </div>
  )
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```tsx
import EmptyState from '@/components/EmptyState'
import { ClipboardList } from 'lucide-react'

{tasks.length === 0 ? (
  <EmptyState
    icon={ClipboardList}
    title="–ù–µ—Ç –∑–∞–¥–∞—á"
    description="–ü–æ–∫–∞ –∑–¥–µ—Å—å –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –∏ –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É!"
    actionLabel="–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É"
    actionHref="/tasks/new"
  />
) : (
  // ... —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
)}
```

---

## 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞

### –û–±–Ω–æ–≤–∏—Ç—å `src/app/login/page.tsx`:

```tsx
'use client'

import { useState } from 'react'
import { Eye, EyeOff, Check, X } from 'lucide-react'

export default function LoginForm() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [emailError, setEmailError] = useState('')
  const [showPassword, setShowPassword] = useState(false)
  
  const validateEmail = (value: string) => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if (!value) {
      setEmailError('Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω')
      return false
    }
    if (!emailRegex.test(value)) {
      setEmailError('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email')
      return false
    }
    setEmailError('')
    return true
  }
  
  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value
    setEmail(value)
    if (value && emailError) {
      validateEmail(value)
    }
  }
  
  const handleEmailBlur = () => {
    validateEmail(email)
  }

  return (
    <form onSubmit={handleSubmit}>
      {/* Email –ø–æ–ª–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π */}
      <div className="space-y-2">
        <input
          type="email"
          placeholder="Email"
          value={email}
          onChange={handleEmailChange}
          onBlur={handleEmailBlur}
          className={`w-full p-3 bg-transparent border rounded-lg text-white placeholder-gray-400 focus:outline-none transition ${
            emailError
              ? 'border-red-500 focus:ring-2 focus:ring-red-500'
              : email && !emailError
              ? 'border-emerald-500 focus:ring-2 focus:ring-emerald-400'
              : 'border-emerald-400/50 focus:ring-2 focus:ring-emerald-400'
          }`}
        />
        
        {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ */}
        {email && (
          <div className="flex items-center gap-2 text-xs">
            {emailError ? (
              <>
                <X className="w-4 h-4 text-red-500" />
                <span className="text-red-400">{emailError}</span>
              </>
            ) : (
              <>
                <Check className="w-4 h-4 text-emerald-500" />
                <span className="text-emerald-400">Email –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω</span>
              </>
            )}
          </div>
        )}
      </div>
      
      {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è... */}
    </form>
  )
}
```

---

## 4. –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∑–∞–¥–∞—á–∏

### –•—É–∫ `src/hooks/useAutoSave.ts`:

```tsx
import { useEffect, useRef } from 'react'

export function useAutoSave<T>(
  data: T,
  key: string,
  interval: number = 30000
) {
  const timeoutRef = useRef<NodeJS.Timeout>()
  const lastSavedRef = useRef<string>('')
  
  useEffect(() => {
    const currentData = JSON.stringify(data)
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
    if (currentData !== lastSavedRef.current) {
      // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current)
      }
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
      timeoutRef.current = setTimeout(() => {
        try {
          localStorage.setItem(`draft_${key}`, currentData)
          lastSavedRef.current = currentData
          console.log('üíæ –ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω')
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞:', error)
        }
      }, interval)
    }
    
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current)
      }
    }
  }, [data, key, interval])
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
  const loadDraft = (): T | null => {
    try {
      const saved = localStorage.getItem(`draft_${key}`)
      return saved ? JSON.parse(saved) : null
    } catch {
      return null
    }
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞
  const clearDraft = () => {
    try {
      localStorage.removeItem(`draft_${key}`)
      lastSavedRef.current = ''
    } catch {
      // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏
    }
  }
  
  return { loadDraft, clearDraft }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `src/app/tasks/new/page.tsx`:

```tsx
import { useAutoSave } from '@/hooks/useAutoSave'

export default function CreateTaskPage() {
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    budget: '',
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  })
  
  // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  const { loadDraft, clearDraft } = useAutoSave(formData, 'new_task', 30000)
  
  // –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  useEffect(() => {
    const draft = loadDraft()
    if (draft) {
      if (confirm('–ù–∞–π–¥–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫. –ó–∞–≥—Ä—É–∑–∏—Ç—å?')) {
        setFormData(draft)
      }
    }
  }, [])
  
  // –û—á–∏—Å—Ç–∫–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    // ... –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    clearDraft() // –£–¥–∞–ª—è–µ–º —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
  }
  
  return (
    <form onSubmit={handleSubmit}>
      {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}
      <div className="text-xs text-gray-500 mb-4">
        üíæ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
      </div>
      
      {/* –ü–æ–ª—è —Ñ–æ—Ä–º—ã... */}
    </form>
  )
}
```

---

## 5. –ö–Ω–æ–ø–∫–∞ "–ù–∞–≤–µ—Ä—Ö"

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `src/components/ScrollToTop.tsx`:

```tsx
'use client'

import { useEffect, useState } from 'react'
import { ArrowUp } from 'lucide-react'

export default function ScrollToTop() {
  const [isVisible, setIsVisible] = useState(false)
  
  useEffect(() => {
    const toggleVisibility = () => {
      if (window.pageYOffset > 300) {
        setIsVisible(true)
      } else {
        setIsVisible(false)
      }
    }
    
    window.addEventListener('scroll', toggleVisibility)
    return () => window.removeEventListener('scroll', toggleVisibility)
  }, [])
  
  const scrollToTop = () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth',
    })
  }
  
  if (!isVisible) return null
  
  return (
    <button
      onClick={scrollToTop}
      className="fixed bottom-8 right-8 p-3 bg-emerald-500/20 border border-emerald-400/50 rounded-full text-emerald-300 hover:bg-emerald-500/30 transition-all z-50 shadow-[0_0_20px_rgba(16,185,129,0.3)]"
      aria-label="–ù–∞–≤–µ—Ä—Ö"
    >
      <ArrowUp className="w-6 h-6" />
    </button>
  )
}
```

### –î–æ–±–∞–≤–∏—Ç—å –≤ `src/app/LayoutClient.tsx`:

```tsx
import ScrollToTop from '@/components/ScrollToTop'

export default function LayoutClient({ children }: { children: React.ReactNode }) {
  return (
    <UserProvider>
      {/* ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... */}
      <ScrollToTop />
    </UserProvider>
  )
}
```

---

## 6. Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞

### –•—É–∫ `src/hooks/useDebounce.ts`:

```tsx
import { useEffect, useState } from 'react'

export function useDebounce<T>(value: T, delay: number = 500): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)
  
  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)
    
    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])
  
  return debouncedValue
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–∏—Å–∫–µ:

```tsx
import { useDebounce } from '@/hooks/useDebounce'

export default function TaskCatalogPage() {
  const [searchQuery, setSearchQuery] = useState('')
  const debouncedSearch = useDebounce(searchQuery, 500)
  
  useEffect(() => {
    if (debouncedSearch) {
      // –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫
      fetchTasks({ search: debouncedSearch })
    }
  }, [debouncedSearch])
  
  return (
    <input
      type="text"
      value={searchQuery}
      onChange={(e) => setSearchQuery(e.target.value)}
      placeholder="–ü–æ–∏—Å–∫..."
    />
  )
}
```

---

## 7. SEO –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–¥–∞—á–∏

### –û–±–Ω–æ–≤–∏—Ç—å `src/app/tasks/[id]/page.tsx`:

```tsx
import { Metadata } from 'next'
import { prisma } from '@/lib/prisma'

export async function generateMetadata({ params }: { params: { id: string } }): Promise<Metadata> {
  const task = await prisma.task.findUnique({
    where: { id: params.id },
    select: {
      title: true,
      description: true,
      budget: true,
      customer: { select: { fullName: true } },
    },
  })
  
  if (!task) {
    return { title: '–ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞' }
  }
  
  const description = task.description?.slice(0, 160) || ''
  const budget = task.budget ? `–ë—é–¥–∂–µ—Ç: ${task.budget}‚ÇΩ` : ''
  
  return {
    title: `${task.title} | NESI`,
    description: `${description} ${budget}`,
    openGraph: {
      title: task.title,
      description: description,
      type: 'website',
      // url: `https://yourdomain.com/tasks/${params.id}`,
      // images: [{ url: '...' }],
    },
    twitter: {
      card: 'summary',
      title: task.title,
      description: description,
    },
  }
}
```

---

## 8. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (JSON-LD)

### –î–æ–±–∞–≤–∏—Ç—å –≤ `src/app/tasks/[id]/page.tsx`:

```tsx
export default function TaskPage({ params }: { params: { id: string } }) {
  // ... –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ ...
  
  const structuredData = {
    '@context': 'https://schema.org',
    '@type': 'JobPosting',
    title: task.title,
    description: task.description,
    identifier: task.id,
    datePosted: task.createdAt,
    hiringOrganization: {
      '@type': 'Organization',
      name: 'NESI',
    },
    jobLocation: {
      '@type': 'Place',
      address: {
        '@type': 'PostalAddress',
        addressCountry: 'RU',
      },
    },
    baseSalary: task.budget ? {
      '@type': 'MonetaryAmount',
      currency: 'RUB',
      value: {
        '@type': 'QuantitativeValue',
        value: task.budget,
      },
    } : undefined,
  }
  
  return (
    <>
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}
      />
      {/* –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç... */}
    </>
  )
}
```

---

## 9. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å Sentry

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
npm install @sentry/nextjs
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `sentry.client.config.ts`:

```ts
import * as Sentry from '@sentry/nextjs'

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1.0,
  environment: process.env.NODE_ENV,
})
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```tsx
try {
  // ... –∫–æ–¥ ...
} catch (error) {
  Sentry.captureException(error)
  toast.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞')
}
```

---

## 10. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã

### –•—É–∫ `src/hooks/useTheme.ts`:

```tsx
import { useEffect, useState } from 'react'

export function useTheme() {
  const [theme, setTheme] = useState<'light' | 'dark'>('dark')
  
  useEffect(() => {
    const saved = localStorage.getItem('theme') as 'light' | 'dark' | null
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
    
    const initialTheme = saved || (prefersDark ? 'dark' : 'light')
    setTheme(initialTheme)
    document.documentElement.classList.toggle('light', initialTheme === 'light')
  }, [])
  
  const toggleTheme = () => {
    const newTheme = theme === 'dark' ? 'light' : 'dark'
    setTheme(newTheme)
    localStorage.setItem('theme', newTheme)
    document.documentElement.classList.toggle('light', newTheme === 'light')
  }
  
  return { theme, toggleTheme }
}
```

---

## üìù –ó–∞–º–µ—Ç–∫–∏

1. **–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –≤–∞—à –∫–æ–¥
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø—ã** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∏–ø—ã –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç–æ–≤
3. **–°—Ç–∏–ª–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã Tailwind –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

---

*–°–æ–∑–¥–∞–Ω–æ: 2025*

